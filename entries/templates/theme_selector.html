<!-- Theme Selector Component -->
<div class="theme-selector">
    <div class="theme-toggle-btn" onclick="toggleThemeSelector()">
        <span class="theme-icon">üé®</span>
        <span class="theme-text">Themes</span>
        <span class="theme-arrow" id="theme-arrow">‚ñº</span>
    </div>
    
    <div class="theme-panel" id="theme-panel" style="display: none;">
        <div class="theme-header">
            <h4>üé® Choose Your Theme</h4>
            <p class="theme-subtitle">Personalize your diary experience</p>
        </div>
        
        <div class="theme-categories">
            <!-- Professional Themes -->
            <div class="theme-category">
                <h5>üíº Professional</h5>
                <div class="theme-options">
                    <div class="theme-option" data-theme="default" onclick="setTheme('default')">
                        <div class="theme-preview purple-preview">
                            <div class="preview-header"></div>
                            <div class="preview-content">
                                <div class="preview-line"></div>
                                <div class="preview-line short"></div>
                            </div>
                        </div>
                        <div class="theme-info">
                            <span class="theme-name">Purple Professional</span>
                            <span class="theme-badge current" id="badge-default">Current</span>
                        </div>
                    </div>
                    
                    <div class="theme-option" data-theme="ocean" onclick="setTheme('ocean')">
                        <div class="theme-preview ocean-preview">
                            <div class="preview-header"></div>
                            <div class="preview-content">
                                <div class="preview-line"></div>
                                <div class="preview-line short"></div>
                            </div>
                        </div>
                        <div class="theme-info">
                            <span class="theme-name">Ocean Blue</span>
                            <span class="theme-badge" id="badge-ocean"></span>
                        </div>
                    </div>
                    
                    <div class="theme-option" data-theme="forest" onclick="setTheme('forest')">
                        <div class="theme-preview forest-preview">
                            <div class="preview-header"></div>
                            <div class="preview-content">
                                <div class="preview-line"></div>
                                <div class="preview-line short"></div>
                            </div>
                        </div>
                        <div class="theme-info">
                            <span class="theme-name">Forest Green</span>
                            <span class="theme-badge" id="badge-forest"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Personal Themes -->
            <div class="theme-category">
                <h5>üíù Personal</h5>
                <div class="theme-options">
                    <div class="theme-option" data-theme="sunset" onclick="setTheme('sunset')">
                        <div class="theme-preview sunset-preview">
                            <div class="preview-header"></div>
                            <div class="preview-content">
                                <div class="preview-line"></div>
                                <div class="preview-line short"></div>
                            </div>
                        </div>
                        <div class="theme-info">
                            <span class="theme-name">Warm Sunset</span>
                            <span class="theme-badge" id="badge-sunset"></span>
                        </div>
                    </div>
                    
                    <div class="theme-option" data-theme="rose" onclick="setTheme('rose')">
                        <div class="theme-preview rose-preview">
                            <div class="preview-header"></div>
                            <div class="preview-content">
                                <div class="preview-line"></div>
                                <div class="preview-line short"></div>
                            </div>
                        </div>
                        <div class="theme-info">
                            <span class="theme-name">Soft Rose</span>
                            <span class="theme-badge" id="badge-rose"></span>
                        </div>
                    </div>
                    
                    <div class="theme-option" data-theme="midnight" onclick="setTheme('midnight')">
                        <div class="theme-preview midnight-preview">
                            <div class="preview-header"></div>
                            <div class="preview-content">
                                <div class="preview-line"></div>
                                <div class="preview-line short"></div>
                            </div>
                        </div>
                        <div class="theme-info">
                            <span class="theme-name">Midnight</span>
                            <span class="theme-badge" id="badge-midnight"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="theme-footer">
            <small>‚ú® Themes apply instantly and save automatically</small>
        </div>
    </div>
</div>

<script>
// ===== THEME SYSTEM JAVASCRIPT =====
let currentTheme = localStorage.getItem('diary-theme') || 'default';

// Apply theme on page load
document.addEventListener('DOMContentLoaded', function() {
    applyTheme(currentTheme);
    updateThemeBadges();
});

function toggleThemeSelector() {
    const panel = document.getElementById('theme-panel');
    const toggleBtn = document.querySelector('.theme-toggle-btn');
    
    if (panel.style.display === 'none' || panel.style.display === '') {
        panel.style.display = 'block';
        toggleBtn.classList.add('active');
    } else {
        panel.style.display = 'none';
        toggleBtn.classList.remove('active');
    }
}

function setTheme(themeName) {
    currentTheme = themeName;
    applyTheme(themeName);
    localStorage.setItem('diary-theme', themeName);
    updateThemeBadges();
    
    // Visual feedback
    const option = document.querySelector(`[data-theme="${themeName}"]`);
    if (option) {
        option.style.transform = 'scale(0.95)';
        setTimeout(() => {
            option.style.transform = 'scale(1)';
        }, 150);
    }
    
    // Auto-close theme panel after selection
    setTimeout(() => {
        document.getElementById('theme-panel').style.display = 'none';
        document.querySelector('.theme-toggle-btn').classList.remove('active');
    }, 500);
}

function applyTheme(themeName) {
    if (themeName === 'default') {
        document.documentElement.removeAttribute('data-theme');
    } else {
        document.documentElement.setAttribute('data-theme', themeName);
    }
}

function updateThemeBadges() {
    // Remove all current badges
    document.querySelectorAll('.theme-badge').forEach(badge => {
        badge.textContent = '';
        badge.classList.remove('current');
    });
    
    // Add current badge to active theme
    const currentBadge = document.getElementById(`badge-${currentTheme}`);
    if (currentBadge) {
        currentBadge.textContent = 'Current';
        currentBadge.classList.add('current');
    }
    
    // Update active state
    document.querySelectorAll('.theme-option').forEach(option => {
        option.classList.remove('active');
    });
    
    const activeOption = document.querySelector(`[data-theme="${currentTheme}"]`);
    if (activeOption) {
        activeOption.classList.add('active');
    }
}

// Close theme panel when clicking outside
document.addEventListener('click', function(event) {
    const themeSelector = document.querySelector('.theme-selector');
    const panel = document.getElementById('theme-panel');
    
    if (themeSelector && !themeSelector.contains(event.target) && panel.style.display === 'block') {
        panel.style.display = 'none';
        document.querySelector('.theme-toggle-btn').classList.remove('active');
    }
});
</script>
