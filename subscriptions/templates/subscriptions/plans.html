{% extends 'base.html' %}
{% block title %}Subscription Plans - Diary App{% endblock %}

{% block content %}
<style>
    /* Mobile-specific fixes for subscription plans */
    @media (max-width: 768px) {
        .section {
            padding: 1rem !important;
        }
        .container {
            max-width: 100% !important;
            overflow-x: hidden !important;
        }
        .card {
            margin-bottom: 1rem !important;
        }
        .columns {
            overflow-x: hidden !important;
        }
    }
    
    @media (max-width: 480px) {
        .section {
            padding: 0.5rem !important;
        }
        .card-content {
            padding: 1rem !important;
        }
    }
</style>
<section class="section">
    <div class="container">
        <h2 class="title is-3 has-text-centered">Choose Your Plan</h2>
        <div class="columns is-multiline is-centered">
          {% for plan in plans %}
          <div class="column is-4-desktop is-6-tablet">
            <div class="card{% if plan.name|lower == 'monthly' %} is-highlighted{% endif %}">
              <header class="card-header">
                <p class="card-header-title is-centered">
                  {{ plan.name }}
                  {% if plan.name|lower == 'monthly' %}
                    <span class="tag is-warning ml-2">Most Popular</span>
                  {% elif plan.name|lower == 'lifetime' %}
                    <span class="tag is-success ml-2">Best Value</span>
                  {% endif %}
                </p>
              </header>
              <div class="card-content">
                <div class="content has-text-centered">
                  <p class="subtitle is-5">{{ plan.description }}</p>
                  <p class="is-size-3 has-text-weight-bold">
                    {% if plan.price == 0 %}
                      $0 <span class="is-size-6 has-text-grey">/{{ plan.duration_display|default:'7 days' }}</span>
                    {% elif plan.name|lower == 'monthly' %}
                      ${{ plan.price }} <span class="is-size-6 has-text-grey">/month</span>
                    {% elif plan.name|lower == 'lifetime' %}
                      ${{ plan.price }} <span class="is-size-6 has-text-grey">one-time</span>
                    {% else %}
                      ${{ plan.price }}
                    {% endif %}
                  </p>
                  <p class="has-text-grey mb-2">{{ plan.marketing_text|default:'' }}</p>
                  <ul class="has-text-left" style="margin-top: 1em;">
                    {% if plan.features %}
                      {% for feature in plan.features %}
                        <li>{{ feature }}</li>
                      {% endfor %}
                    {% endif %}
                  </ul>
                </div>
              </div>
              <footer class="card-footer">
                <a href="{% url 'subscriptions:upgrade' plan.id %}" class="button {% if plan.name|lower == 'monthly' %}is-link{% elif plan.name|lower == 'lifetime' %}is-success{% else %}is-primary{% endif %} is-fullwidth">
                  {% if plan.price == 0 %}Start Free Trial{% elif plan.name|lower == 'monthly' %}Choose Monthly{% elif plan.name|lower == 'lifetime' %}Go Lifetime{% else %}Choose Plan{% endif %}
                </a>
              </footer>
            </div>
          </div>
          {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
